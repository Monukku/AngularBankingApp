// ============================================================
// dashboard.component.scss — Complete with all widgets
// ============================================================

$violet:   #7c3aed;
$v-light:  #a78bfa;
$indigo:   #4f46e5;
$cyan:     #06b6d4;
$sky:      #0ea5e9;
$emerald:  #10b981;
$em-light: #34d399;
$amber:    #f59e0b;
$rose:     #f43f5e;
$pink:     #ec4899;
$gold:     #f59e0b;

$bg:      #0d0f1a;
$s1:      #141626;
$s2:      #1c1f35;
$s3:      #232640;
$border:  rgba(255,255,255,0.07);
$b-hover: rgba(124,58,237,0.35);

$t1: #f0f2ff;
$t2: #8b8fa8;
$t3: #5a5e78;

$r-sm: 8px;
$r-md: 12px;
$r-lg: 16px;

// ─── Keyframes ────────────────────────────────────────────────
@keyframes orbDrift1 {
  0%,100% { transform:translate(0,0) scale(1); opacity:.2; }
  33%     { transform:translate(55px,-70px) scale(1.12); opacity:.28; }
  66%     { transform:translate(-25px,35px) scale(.9); opacity:.14; }
}
@keyframes orbDrift2 {
  0%,100% { transform:translate(0,0) scale(1); opacity:.15; }
  40%     { transform:translate(-65px,55px) scale(1.2); opacity:.2; }
  75%     { transform:translate(40px,-25px) scale(.88); opacity:.1; }
}
@keyframes orbDrift3 {
  0%,100% { transform:translate(0,0); opacity:.1; }
  50%     { transform:translate(50px,-45px); opacity:.18; }
}
@keyframes orbDrift4 {
  0%,100% { transform:translate(0,0); opacity:.09; }
  50%     { transform:translate(-40px,50px); opacity:.15; }
}
@keyframes gridBreathe {
  0%,100% { opacity:.3; } 50% { opacity:.55; }
}
@keyframes scanLine {
  from { top:-2px; opacity:0; } 4% { opacity:1; } 96% { opacity:1; } to { top:100vh; opacity:0; }
}
@keyframes cardFadeUp {
  from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); }
}
@keyframes shimmerBorder {
  0% { left:-100%; } 100% { left:150%; }
}
@keyframes blobPulse {
  0%,100% { transform:scale(1); opacity:.08; } 50% { transform:scale(1.6); opacity:.14; }
}
@keyframes holoShift {
  0%,100% { background-position:0% 50%; } 50% { background-position:100% 50%; }
}
@keyframes balanceGlow {
  0%,100% { text-shadow:none; } 50% { text-shadow:0 0 32px rgba($violet,.3); }
}
@keyframes livePulse {
  0%,100% { box-shadow:0 0 0 0 rgba($em-light,.7); } 50% { box-shadow:0 0 0 7px rgba($em-light,0); }
}
@keyframes btnGlow {
  0%,100% { box-shadow:0 4px 16px rgba($violet,.35); }
  50%     { box-shadow:0 4px 32px rgba($violet,.6), 0 0 0 4px rgba($violet,.12); }
}
@keyframes avatarPop {
  from { opacity:0; transform:scale(.6) translateY(10px); } to { opacity:1; transform:scale(1) translateY(0); }
}
@keyframes txRowIn {
  from { opacity:0; transform:translateX(-12px); } to { opacity:1; transform:translateX(0); }
}
@keyframes badgePop {
  from { opacity:0; transform:scale(.6); } to { opacity:1; transform:scale(1); }
}
@keyframes workflowSlide {
  from { opacity:0; transform:translateX(12px); } to { opacity:1; transform:translateX(0); }
}
@keyframes waveBar {
  from { transform:scaleY(.2); } to { transform:scaleY(1); }
}
@keyframes fillBar {
  from { width:0 !important; }
}
@keyframes ringDraw {
  from { stroke-dashoffset:201; }
}
@keyframes statCardUp {
  from { opacity:0; transform:translateY(24px) scale(.97); } to { opacity:1; transform:translateY(0) scale(1); }
}
@keyframes spinnerFade {
  from { opacity:0; transform:scale(.8); } to { opacity:1; transform:scale(1); }
}
@keyframes insightSlide {
  from { opacity:0; transform:translateX(-8px); } to { opacity:1; transform:translateX(0); }
}
@keyframes activityPulse {
  0%,100% { transform:scale(1); } 50% { transform:scale(1.4); }
}
@keyframes barGrow {
  from { height:0 !important; }
}
@keyframes donutDraw {
  from { stroke-dashoffset:283; }
}
@keyframes goalFill {
  from { width:0 !important; }
}

// ─── Shared card ──────────────────────────────────────────────
%card {
  background: linear-gradient(135deg, $s1 0%, $s2 100%);
  border-radius: $r-lg;
  padding: 24px;
  border: 1px solid $border;
  box-shadow: 0 1px 4px rgba(0,0,0,.4), 0 4px 18px rgba(0,0,0,.25);
  position: relative;
  overflow: hidden;
  z-index: 1;
  animation: cardFadeUp .55s cubic-bezier(.22,1,.36,1) both;
  transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
  &::after {
    content: ''; position: absolute; top: 0; left: -100%;
    width: 55%; height: 1px;
    background: linear-gradient(90deg, transparent, rgba($violet,.7), rgba($cyan,.6), transparent);
    pointer-events: none; z-index: 2;
    animation: shimmerBorder 5s linear infinite;
  }
  &:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 36px rgba(0,0,0,.4), 0 0 0 1px rgba($violet,.18);
    border-color: $b-hover;
  }
}

// ─── Host ─────────────────────────────────────────────────────
:host { display:block; width:100%; min-height:100%; font-family:'DM Sans','Segoe UI',sans-serif; }

// ─── Container ────────────────────────────────────────────────
.dashboard-container {
  width:100%; min-height:100%; padding:24px;
  background:$bg; color:$t1; position:relative; box-sizing:border-box;
}

// ─── Ambient ──────────────────────────────────────────────────
.orb { position:fixed; border-radius:50%; filter:blur(70px); pointer-events:none; z-index:0; }
.orb-violet { width:500px;height:500px;top:-150px;left:200px;background:radial-gradient(circle,rgba($violet,.28) 0%,transparent 68%);animation:orbDrift1 20s ease-in-out infinite; }
.orb-cyan   { width:580px;height:580px;bottom:-180px;right:-100px;background:radial-gradient(circle,rgba($cyan,.2) 0%,transparent 68%);animation:orbDrift2 25s ease-in-out infinite; }
.orb-rose   { width:360px;height:360px;top:40%;left:50%;background:radial-gradient(circle,rgba($rose,.13) 0%,transparent 70%);animation:orbDrift3 28s ease-in-out infinite; }
.orb-emerald{ width:300px;height:300px;top:15%;right:20%;background:radial-gradient(circle,rgba($emerald,.12) 0%,transparent 70%);animation:orbDrift4 22s ease-in-out infinite; }
.bg-texture { position:fixed;inset:0;pointer-events:none;z-index:0;background-image:radial-gradient(circle,rgba(255,255,255,.05) 1px,transparent 1px);background-size:28px 28px;animation:gridBreathe 9s ease-in-out infinite; }
.scan-line  { position:fixed;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,rgba($violet,.5),rgba($cyan,.45),transparent);pointer-events:none;z-index:0;animation:scanLine 10s linear infinite; }

// ─── Loading ──────────────────────────────────────────────────
.loading-overlay {
  position:fixed;inset:0;background:rgba($bg,.88);backdrop-filter:blur(8px);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:20px;z-index:9999;animation:spinnerFade .3s ease both;
  p { font-size:14px;color:$t2;font-weight:500; }
  ::ng-deep .mat-mdc-progress-spinner circle { stroke:$violet !important; }
}

// ─── Error Banner ─────────────────────────────────────────────
.error-banner {
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  padding:12px 18px;border-radius:$r-md;background:rgba($rose,.12);
  border:1px solid rgba($rose,.35);color:lighten($rose,12%);
  font-size:13px;font-weight:600;margin-bottom:20px;position:relative;z-index:1;animation:cardFadeUp .4s ease both;
  button { color:lighten($rose,12%) !important;font-weight:700 !important;border:1px solid rgba($rose,.4) !important;border-radius:$r-sm !important;padding:0 12px !important;height:30px !important;&:hover{background:rgba($rose,.2) !important;} }
}

// ─── Stat Cards ───────────────────────────────────────────────
.stat-cards-row {
  display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px;position:relative;z-index:1;
  @media(max-width:1200px){grid-template-columns:repeat(2,1fr);} @media(max-width:600px){grid-template-columns:1fr 1fr;}
}
.stat-card {
  border-radius:$r-lg;padding:20px;border:1px solid $border;position:relative;overflow:hidden;cursor:pointer;
  background:linear-gradient(135deg,$s1 0%,$s2 100%);animation:statCardUp .6s cubic-bezier(.22,1,.36,1) both;
  transition:transform .25s ease,box-shadow .25s ease;
  &:nth-child(1){animation-delay:.06s;}&:nth-child(2){animation-delay:.12s;}&:nth-child(3){animation-delay:.18s;}&:nth-child(4){animation-delay:.24s;}
  &:hover{transform:translateY(-5px);}
  &::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;pointer-events:none;animation:shimmerBorder 4s linear infinite;}
  &[data-color="violet"]{&::before{background:linear-gradient(90deg,$violet,$v-light,$cyan);}&:hover{box-shadow:0 12px 36px rgba($violet,.3);border-color:rgba($violet,.35);}.stat-icon-wrap{background:rgba($violet,.18);}.stat-blob{background:$violet;}}
  &[data-color="cyan"]{&::before{background:linear-gradient(90deg,$cyan,$sky);}&:hover{box-shadow:0 12px 36px rgba($cyan,.28);border-color:rgba($cyan,.3);}.stat-icon-wrap{background:rgba($cyan,.18);}.stat-blob{background:$cyan;}}
  &[data-color="emerald"]{&::before{background:linear-gradient(90deg,$emerald,$em-light);}&:hover{box-shadow:0 12px 36px rgba($emerald,.28);border-color:rgba($emerald,.3);}.stat-icon-wrap{background:rgba($emerald,.18);}.stat-blob{background:$emerald;}}
  &[data-color="rose"]{&::before{background:linear-gradient(90deg,$rose,$pink);}&:hover{box-shadow:0 12px 36px rgba($rose,.28);border-color:rgba($rose,.3);}.stat-icon-wrap{background:rgba($rose,.18);}.stat-blob{background:$rose;}}
  .stat-blob{position:absolute;top:-40px;right:-40px;width:110px;height:110px;border-radius:50%;opacity:.08;filter:blur(24px);pointer-events:none;animation:blobPulse 5s ease-in-out infinite;}
  .stat-icon-wrap{width:40px;height:40px;border-radius:$r-sm;display:flex;align-items:center;justify-content:center;font-size:20px;margin-bottom:14px;}
  .stat-label{font-size:11px;color:$t3;font-weight:600;text-transform:uppercase;letter-spacing:.8px;margin-bottom:5px;}
  .stat-value{font-size:24px;font-weight:800;color:$t1;letter-spacing:-.5px;margin-bottom:8px;font-family:'Syne','DM Sans',sans-serif;}
  .stat-change{font-size:11px;font-weight:600;display:inline-flex;align-items:center;gap:4px;padding:3px 9px;border-radius:20px;&.up{background:rgba($emerald,.15);color:$em-light;}&.down{background:rgba($rose,.15);color:lighten($rose,12%);}}
}

// ─── Dashboard Grid ───────────────────────────────────────────
.dashboard-grid {
  display:grid;grid-template-columns:1fr 320px;gap:24px;position:relative;z-index:1;
  @media(max-width:1300px){grid-template-columns:1fr 280px;gap:18px;}
  @media(max-width:1024px){grid-template-columns:1fr;}
  &.loading{opacity:.5;pointer-events:none;}
}
.left-section{display:flex;flex-direction:column;gap:20px;}
.right-sidebar{
  display:flex;flex-direction:column;gap:20px;
  @media(max-width:1024px){display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));}
}

// ─── Balance Card ─────────────────────────────────────────────
.balance-card {
  @extend %card; animation-delay:.04s;
  background:linear-gradient(135deg,#1a1040 0%,#0f1a2e 50%,#0d1520 100%);
  border-color:rgba($violet,.25); padding:28px;
  &::before{content:'';position:absolute;inset:0;z-index:0;background:radial-gradient(ellipse at 10% 50%,rgba($violet,.15) 0%,transparent 55%),radial-gradient(ellipse at 80% 20%,rgba($cyan,.1) 0%,transparent 50%);pointer-events:none;}
  .balance-card-inner{display:flex;justify-content:space-between;align-items:center;position:relative;z-index:1;gap:20px;@media(max-width:700px){flex-direction:column;align-items:flex-start;}}
  .balance-left{flex:1;} .balance-right{display:flex;flex-direction:column;align-items:center;gap:14px;}
  .card-label{font-size:11px;color:rgba(255,255,255,.5);font-weight:600;text-transform:uppercase;letter-spacing:1px;margin:0 0 10px;}
  .balance-amount{font-size:42px;font-weight:800;color:$t1;letter-spacing:-1.5px;line-height:1;font-family:'Syne','DM Sans',sans-serif;margin-bottom:24px;display:flex;align-items:center;gap:10px;animation:balanceGlow 4s ease-in-out infinite;@media(max-width:700px){font-size:32px;}.balance-live-dot{width:9px;height:9px;border-radius:50%;background:$em-light;flex-shrink:0;animation:livePulse 2s ease-in-out infinite;}}
  .quick-actions{display:flex;gap:10px;flex-wrap:wrap;}
  .action-btn{flex:1;min-width:90px;height:42px;border-radius:$r-md !important;font-weight:600 !important;font-size:13px !important;display:flex !important;align-items:center !important;justify-content:center !important;gap:6px !important;transition:all .25s ease !important;.action-icon{font-size:16px;font-weight:700;width:18px;text-align:center;}}
  .action-send{background:linear-gradient(135deg,$violet,$indigo) !important;box-shadow:none !important;animation:btnGlow 3s ease-in-out infinite;&:hover{transform:translateY(-2px);opacity:.9;}}
  .outlined{border:1px solid rgba($v-light,.35) !important;color:$v-light !important;background:rgba($violet,.08) !important;&:hover{background:rgba($violet,.18) !important;border-color:rgba($v-light,.6) !important;transform:translateY(-2px);}}
  .live-indicator{display:flex;align-items:center;gap:6px;font-size:10px;color:$em-light;font-weight:700;letter-spacing:1px;}
  .live-dot-sm{width:7px;height:7px;border-radius:50%;background:$em-light;animation:livePulse 1.6s ease-in-out infinite;}
  .waveform{display:flex;align-items:center;gap:2px;height:16px;}
  .wave-bar{width:3px;border-radius:2px;background:$em-light;animation:waveBar 1s ease-in-out infinite alternate;&:nth-child(1){height:4px;animation-delay:0s;}&:nth-child(2){height:10px;animation-delay:.1s;}&:nth-child(3){height:16px;animation-delay:.2s;}&:nth-child(4){height:12px;animation-delay:.3s;}&:nth-child(5){height:7px;animation-delay:.15s;}&:nth-child(6){height:14px;animation-delay:.25s;}}
  .mini-ring{width:80px;height:80px;}
  .ring-progress{animation:ringDraw 1.4s cubic-bezier(.22,1,.36,1) .4s both;}
}

// ─── Smart Insights (NEW) ─────────────────────────────────────
.insights-card {
  @extend %card; animation-delay:.07s;
  .card-title-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;}
  .card-title{font-size:15px;font-weight:700;color:$t1;margin:0;font-family:'Syne','DM Sans',sans-serif;display:flex;align-items:center;gap:8px;.card-title-icon{font-size:17px;}}
  .ai-badge{font-size:10px;font-weight:700;padding:3px 10px;border-radius:20px;background:linear-gradient(135deg,rgba($violet,.3),rgba($cyan,.2));color:$v-light;border:1px solid rgba($v-light,.25);letter-spacing:.5px;text-transform:uppercase;}
  .insights-list{display:flex;flex-direction:column;gap:10px;}
  .insight-item{
    display:flex;align-items:flex-start;gap:12px;padding:12px 14px;border-radius:$r-md;
    background:rgba($s3,.6);border:1px solid $border;
    animation:insightSlide .4s ease both;
    @for $i from 1 through 5{&:nth-child(#{$i}){animation-delay:#{.06s * $i};}}
    transition:border-color .2s,background .2s;
    &:hover{border-color:$b-hover;background:rgba($violet,.08);}
    &[data-type="warning"]{border-left:3px solid $amber;}
    &[data-type="success"]{border-left:3px solid $em-light;}
    &[data-type="info"]{border-left:3px solid $cyan;}
    &[data-type="alert"]{border-left:3px solid $rose;}
  }
  .insight-icon-wrap{font-size:20px;flex-shrink:0;margin-top:1px;}
  .insight-body{flex:1;min-width:0;}
  .insight-title{font-size:13px;font-weight:600;color:$t1;margin-bottom:3px;}
  .insight-desc{font-size:11px;color:$t3;line-height:1.5;}
  .insight-tag{
    font-size:10px;font-weight:700;padding:2px 8px;border-radius:20px;white-space:nowrap;flex-shrink:0;
    &[data-type="warning"]{background:rgba($amber,.15);color:lighten($amber,15%);}
    &[data-type="success"]{background:rgba($emerald,.15);color:$em-light;}
    &[data-type="info"]{background:rgba($cyan,.15);color:lighten($cyan,10%);}
    &[data-type="alert"]{background:rgba($rose,.15);color:lighten($rose,12%);}
  }
}

// ─── Quick Transaction ────────────────────────────────────────
.quick-transaction-card {
  @extend %card; animation-delay:.10s;
  .card-title{font-size:15px;font-weight:700;color:$t1;margin:0 0 18px;font-family:'Syne','DM Sans',sans-serif;display:flex;align-items:center;gap:8px;.card-title-icon{font-size:18px;}}
  .users-carousel{display:flex;gap:12px;align-items:center;overflow-x:auto;padding-bottom:6px;&::-webkit-scrollbar{height:3px;}&::-webkit-scrollbar-thumb{background:$border;border-radius:2px;}}
  .user-item{display:flex;flex-direction:column;align-items:center;gap:7px;cursor:pointer;min-width:68px;text-align:center;transition:transform .22s ease;animation:avatarPop .4s cubic-bezier(.34,1.56,.64,1) both;@for $i from 1 through 10{&:nth-child(#{$i}){animation-delay:#{.06s + $i * .07s};}}&:hover{transform:translateY(-6px);.user-avatar{box-shadow:0 8px 22px rgba($violet,.4);border-color:rgba($v-light,.5);}}}
  .user-avatar{width:50px;height:50px;border-radius:$r-md;background:linear-gradient(135deg,$violet,$pink);display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:18px;border:1.5px solid $border;overflow:hidden;transition:box-shadow .25s,border-color .25s;img{width:100%;height:100%;object-fit:cover;}}
  .user-name{font-size:12px;font-weight:600;color:$t2;} .user-amount{font-size:11px;color:$t3;}
  .scroll-btn{flex-shrink:0;color:$t3 !important;&:hover{color:$v-light !important;}}
}

// ─── Charts ───────────────────────────────────────────────────
.charts-row{display:grid;grid-template-columns:1fr 1fr;gap:18px;@media(max-width:900px){grid-template-columns:1fr;}}
.chart-card {
  @extend %card;
  &:nth-child(1){animation-delay:.18s;}&:nth-child(2){animation-delay:.24s;}
  &::before{content:'';position:absolute;bottom:-40px;left:-40px;width:150px;height:150px;border-radius:50%;background:$cyan;opacity:.04;filter:blur(28px);pointer-events:none;animation:blobPulse 6s ease-in-out 1s infinite;}
  .chart-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:14px;gap:12px;}
  .chart-info{flex:1;} .chart-label-row{display:flex;align-items:center;gap:7px;margin-bottom:5px;}
  .chart-dot-accent{width:8px;height:8px;border-radius:50%;flex-shrink:0;}
  .chart-label{font-size:11px;color:$t3;font-weight:600;text-transform:uppercase;letter-spacing:.8px;margin:0;}
  .chart-value{font-size:22px;font-weight:800;color:$t1;display:flex;align-items:center;gap:10px;font-family:'Syne','DM Sans',sans-serif;letter-spacing:-.4px;}
  .change-badge{font-size:11px;padding:3px 8px;border-radius:$r-sm;font-weight:600;display:inline-flex;align-items:center;gap:3px;animation:badgePop .4s cubic-bezier(.34,1.56,.64,1) .4s both;mat-icon{font-size:13px;width:13px;height:13px;}&.positive{background:rgba($emerald,.15);color:$em-light;}&.negative{background:rgba($rose,.15);color:lighten($rose,12%);}}
  .period-select{padding:7px 10px;border:1px solid $border;border-radius:$r-sm;font-size:12px;color:$t2;background:$s3;cursor:pointer;font-weight:500;outline:none;appearance:none;transition:border-color .2s,color .2s;&:hover,&:focus{border-color:$b-hover;color:$t1;}}
  .chart-container{height:220px;margin-top:6px;::ng-deep{ngx-charts-area-chart{display:block;width:100%;height:100%;}.ngx-charts{text{fill:$t3 !important;font-size:11px !important;}.gridline-path{stroke:$border !important;}.area{opacity:.25 !important;}.line-series path{stroke-width:2.5px !important;}}}}
}

// ─── Transaction History ──────────────────────────────────────
.transaction-history-card {
  @extend %card; animation-delay:.30s; padding:24px;
  .history-header{display:flex;flex-direction:column;gap:14px;margin-bottom:20px;}
  .card-title-row{display:flex;align-items:center;justify-content:space-between;}
  .card-title{font-size:15px;font-weight:700;color:$t1;margin:0;font-family:'Syne','DM Sans',sans-serif;display:flex;align-items:center;gap:8px;.card-title-icon{font-size:17px;}}
  .history-badge{font-size:11px;font-weight:600;padding:3px 10px;border-radius:20px;background:rgba($violet,.18);color:$v-light;animation:badgePop .4s ease .35s both;}
  .history-controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;}
  .search-box{flex:1;min-width:180px;display:flex;align-items:center;gap:9px;padding:9px 13px;background:$s3;border-radius:$r-md;border:1px solid $border;transition:border-color .2s,box-shadow .2s;&:focus-within{border-color:$b-hover;box-shadow:0 0 0 3px rgba($violet,.1);}mat-icon{color:$t3;font-size:18px;}input{flex:1;border:none;background:transparent;font-size:13px;color:$t1;outline:none;&::placeholder{color:$t3;}}}
  .period-select{padding:9px 10px;border:1px solid $border;border-radius:$r-md;font-size:12px;color:$t2;background:$s3;cursor:pointer;font-weight:500;outline:none;appearance:none;transition:border-color .2s;&:hover{border-color:$b-hover;}}
  .filter-btn{color:$t3 !important;&:hover{color:$v-light !important;}}
  .table-wrapper{overflow-x:auto;border-radius:$r-md;border:1px solid $border;&::-webkit-scrollbar{height:4px;}&::-webkit-scrollbar-thumb{background:rgba($violet,.3);border-radius:2px;}}
  .tx-table{
    width:100%;border-collapse:collapse;font-size:13px;
    thead tr{background:rgba($s3,.95);border-bottom:1px solid rgba($violet,.2);}
    thead th{padding:12px 16px;font-size:10px;font-weight:700;color:$t3;text-transform:uppercase;letter-spacing:1px;white-space:nowrap;text-align:left;&.col-check{width:44px;padding-left:18px;}}
    tbody tr.tx-row{border-bottom:1px solid rgba(255,255,255,.045);transition:background .16s ease,transform .16s ease;animation:txRowIn .4s ease both;@for $i from 1 through 25{&:nth-child(#{$i}){animation-delay:#{$i * .035s};}}&:last-child{border-bottom:none;}&:hover{background:rgba($violet,.08);transform:translateX(4px);td:first-child{border-left-color:rgba($v-light,.6);}.company-logo{border-color:rgba($v-light,.4);box-shadow:0 4px 14px rgba($violet,.35);}}}
    tbody td{padding:14px 16px;color:$t1;vertical-align:middle;&:first-child{border-left:3px solid transparent;padding-left:15px;transition:border-color .16s ease;}&.col-check{width:44px;}&.negative .amount-val{color:lighten($rose,12%);}&.positive .amount-val{color:$em-light;}}
    tbody tr td .empty-state{text-align:center;padding:52px 20px;color:$t3;.empty-icon{font-size:34px;opacity:.35;margin-bottom:12px;}.empty-title{font-size:14px;font-weight:600;color:$t2;margin-bottom:5px;}.empty-sub{font-size:12px;}}
  }
  .invoice-cell{display:flex;align-items:center;gap:7px;font-size:12px;font-weight:600;color:$t2;font-family:'Courier New',monospace;letter-spacing:.3px;.invoice-icon{font-size:14px;}}
  .transaction-cell{display:flex;align-items:center;gap:12px;.company-logo{width:38px;height:38px;border-radius:$r-md;flex-shrink:0;background:linear-gradient(135deg,$s3,rgba($violet,.2));border:1px solid rgba($violet,.2);overflow:hidden;display:flex;align-items:center;justify-content:center;transition:border-color .2s,box-shadow .2s;img{width:100%;height:100%;object-fit:cover;}}.transaction-details{min-width:0;}.transaction-name{font-weight:600;color:$t1;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.transaction-category{font-size:11px;color:$t3;margin-top:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}}
  .date-cell{display:flex;flex-direction:column;.date-main{font-size:13px;font-weight:600;color:$t1;}.date-year{font-size:10px;color:$t3;margin-top:2px;}}
  .amount-val{font-weight:700;font-size:13px;font-variant-numeric:tabular-nums;letter-spacing:.3px;}
  .status-badge{display:inline-flex;align-items:center;gap:5px;padding:5px 12px;border-radius:20px;font-size:11px;font-weight:600;white-space:nowrap;animation:badgePop .4s cubic-bezier(.34,1.56,.64,1) both;position:relative;overflow:hidden;&::after{content:'';position:absolute;top:0;left:-100%;width:60%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.14),transparent);transition:left .45s ease;pointer-events:none;}&:hover::after{left:150%;}&.completed{background:rgba($emerald,.15);color:$em-light;border:1px solid rgba($emerald,.28);}&.progress{background:rgba($amber,.15);color:lighten($amber,15%);border:1px solid rgba($amber,.28);}&.pending{background:rgba($rose,.15);color:lighten($rose,12%);border:1px solid rgba($rose,.28);}}
  ::ng-deep{.col-check .mdc-checkbox__background{border-color:$b-hover !important;border-radius:4px !important;}.col-check .mat-mdc-checkbox-checked .mdc-checkbox__background{background:$violet !important;border-color:$violet !important;}}
}

// ─── Widget Cards Base ────────────────────────────────────────
.widget-card {
  @extend %card;
  .widget-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;}
  .widget-title{font-size:14px;font-weight:700;color:$t1;margin:0;font-family:'Syne','DM Sans',sans-serif;display:flex;align-items:center;gap:7px;.widget-title-icon{font-size:16px;}}
  .add-btn{font-size:12px !important;color:$v-light !important;font-weight:600 !important;padding:0 !important;height:auto !important;transition:color .2s !important;&:hover{color:white !important;}mat-icon{font-size:15px;width:15px;height:15px;margin-left:3px;}}
  .add-icon-btn{color:$t3 !important;&:hover{color:$v-light !important;}}
  .upcoming-btn{width:100% !important;color:$v-light !important;font-weight:600 !important;font-size:12px !important;transition:color .2s !important;&:hover{color:white !important;}mat-icon{font-size:15px;width:15px;height:15px;margin-left:4px;}}
}
.cards-widget{animation-delay:.08s;} .conversion-widget{animation-delay:.14s;} .workflows-widget{animation-delay:.20s;}
.activity-widget{animation-delay:.09s;} .bills-widget{animation-delay:.11s;} .subscriptions-widget{animation-delay:.13s;}
.rewards-widget{animation-delay:.15s;} .security-widget{animation-delay:.17s;}

// ─── Credit Card ──────────────────────────────────────────────
.credit-card{border-radius:$r-lg;padding:20px;background:linear-gradient(135deg,$indigo 0%,$violet 50%,$cyan 100%);background-size:200% 200%;animation:holoShift 7s ease-in-out infinite;position:relative;overflow:hidden;min-height:178px;display:flex;flex-direction:column;justify-content:space-between;color:white;box-shadow:0 10px 36px rgba($violet,.4);transition:box-shadow .3s ease;&:hover{box-shadow:0 14px 50px rgba($violet,.55);}.cc-circles{position:absolute;inset:0;pointer-events:none;&::before{content:'';position:absolute;top:-55px;right:-55px;width:175px;height:175px;border-radius:50%;background:rgba(255,255,255,.1);}&::after{content:'';position:absolute;bottom:-40px;left:-40px;width:125px;height:125px;border-radius:50%;background:rgba(255,255,255,.07);}}.card-top{display:flex;justify-content:space-between;align-items:flex-start;position:relative;z-index:1;}.card-brand{font-size:14px;font-weight:800;letter-spacing:2px;font-family:'Syne',sans-serif;}.card-type{font-size:11px;font-weight:600;opacity:.85;letter-spacing:1px;}.card-holder{font-size:10px;opacity:.7;text-transform:uppercase;letter-spacing:1px;position:relative;z-index:1;margin-top:14px;}.card-number{font-size:15px;font-weight:600;letter-spacing:3px;position:relative;z-index:1;margin-top:4px;font-family:'Courier New',monospace;}.card-footer{display:flex;justify-content:space-between;padding-top:12px;border-top:1px solid rgba(255,255,255,.18);position:relative;z-index:1;div{display:flex;flex-direction:column;}.label{font-size:9px;opacity:.7;text-transform:uppercase;letter-spacing:.8px;margin-bottom:2px;}.value{font-size:13px;font-weight:700;}}.card-navigation{display:flex;align-items:center;justify-content:center;gap:12px;margin-top:10px;padding-top:10px;border-top:1px solid rgba(255,255,255,.15);position:relative;z-index:1;span{font-size:12px;opacity:.85;}button{color:white !important;}}}
.card-limit-row{display:flex;justify-content:space-between;margin-top:10px;font-size:12px;color:$t2;.card-limit-val{color:$t1;font-weight:600;}}
.limit-track{width:100%;height:5px;background:$s3;border-radius:99px;overflow:hidden;margin-top:6px;}
.limit-fill{height:100%;width:76%;border-radius:99px;background:linear-gradient(90deg,$violet,$cyan);animation:fillBar 1s cubic-bezier(.22,1,.36,1) .25s both;}

// ─── Activity Feed (NEW) ─────────────────────────────────────
.activity-widget {
  .live-indicator-sm{display:flex;align-items:center;gap:5px;font-size:10px;color:$em-light;font-weight:700;letter-spacing:.8px;}
  .live-dot-sm{width:6px;height:6px;border-radius:50%;background:$em-light;animation:livePulse 1.6s ease-in-out infinite;}
  .activity-list{display:flex;flex-direction:column;gap:0;}
  .activity-item{
    display:flex;align-items:center;gap:10px;padding:10px 0;
    border-bottom:1px solid rgba(255,255,255,.04);
    &:last-child{border-bottom:none;}
    &:hover .activity-body .activity-title{color:$v-light;}
  }
  .activity-dot{
    width:8px;height:8px;border-radius:50%;flex-shrink:0;
    animation:activityPulse 2s ease-in-out infinite;
    &[data-type="credit"]{background:$em-light;box-shadow:0 0 6px rgba($em-light,.5);}
    &[data-type="debit"]{background:$rose;box-shadow:0 0 6px rgba($rose,.5);}
    &[data-type="alert"]{background:$amber;box-shadow:0 0 6px rgba($amber,.5);}
    &[data-type="login"]{background:$cyan;box-shadow:0 0 6px rgba($cyan,.5);}
  }
  .activity-body{flex:1;min-width:0;}
  .activity-title{font-size:12px;font-weight:600;color:$t1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:color .2s;}
  .activity-time{font-size:10px;color:$t3;margin-top:2px;}
  .activity-amount{font-size:12px;font-weight:700;font-variant-numeric:tabular-nums;white-space:nowrap;flex-shrink:0;&.credit{color:$em-light;}&.debit{color:lighten($rose,12%);}}
}

// ─── Upcoming Bills (NEW) ─────────────────────────────────────
.bills-widget {
  .bills-alert{font-size:11px;font-weight:700;padding:3px 9px;border-radius:20px;background:rgba($rose,.15);color:lighten($rose,12%);border:1px solid rgba($rose,.25);}
  .bills-list{display:flex;flex-direction:column;gap:8px;margin-bottom:14px;}
  .bill-item{
    display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:$r-md;
    background:rgba($s3,.5);border:1px solid $border;transition:all .2s;
    &:hover{border-color:$b-hover;background:rgba($violet,.06);}
    &[data-urgency="overdue"]{border-left:3px solid $rose;}
    &[data-urgency="today"]{border-left:3px solid $amber;}
    &[data-urgency="upcoming"]{border-left:3px solid $cyan;}
  }
  .bill-icon{font-size:20px;flex-shrink:0;}
  .bill-info{flex:1;min-width:0;}
  .bill-name{font-size:13px;font-weight:600;color:$t1;}
  .bill-due{font-size:11px;color:$t3;margin-top:2px;}
  .bill-right{display:flex;flex-direction:column;align-items:flex-end;gap:4px;}
  .bill-amount{font-size:13px;font-weight:700;color:$t1;}
  .bill-badge{
    font-size:9px;font-weight:700;padding:2px 6px;border-radius:99px;text-transform:uppercase;letter-spacing:.5px;
    &[data-urgency="overdue"]{background:rgba($rose,.15);color:lighten($rose,12%);}
    &[data-urgency="today"]{background:rgba($amber,.15);color:lighten($amber,15%);}
    &[data-urgency="upcoming"]{background:rgba($cyan,.15);color:lighten($cyan,10%);}
  }
}

// ─── Subscriptions (NEW) ─────────────────────────────────────
.subscriptions-widget {
  .subs-total{font-size:13px;font-weight:700;color:$v-light;}
  .subs-list{display:flex;flex-direction:column;gap:8px;}
  .sub-item{display:flex;align-items:center;gap:10px;padding:8px 10px;border-radius:$r-md;background:rgba($s3,.5);border:1px solid $border;transition:all .2s;&:hover{border-color:$b-hover;background:rgba($violet,.06);}}
  .sub-logo{font-size:22px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:$s3;border-radius:$r-sm;border:1px solid $border;flex-shrink:0;}
  .sub-info{flex:1;min-width:0;}
  .sub-name{font-size:13px;font-weight:600;color:$t1;}
  .sub-next{font-size:11px;color:$t3;margin-top:2px;}
  .sub-cost{font-size:13px;font-weight:700;color:$t1;font-variant-numeric:tabular-nums;}
}

// ─── Rewards (NEW) ────────────────────────────────────────────
.rewards-widget {
  .rewards-tier{font-size:11px;font-weight:700;padding:3px 10px;border-radius:20px;text-transform:uppercase;letter-spacing:.5px;&[data-tier="Gold"]{background:rgba($gold,.15);color:lighten($gold,15%);border:1px solid rgba($gold,.3);}&[data-tier="Silver"]{background:rgba($t2,.15);color:$t2;border:1px solid rgba($t2,.3);}&[data-tier="Platinum"]{background:rgba($cyan,.15);color:lighten($cyan,10%);border:1px solid rgba($cyan,.3);}}
  .rewards-points-row{display:flex;align-items:baseline;gap:6px;margin-bottom:12px;}
  .rewards-points-val{font-size:28px;font-weight:800;color:$t1;font-family:'Syne','DM Sans',sans-serif;font-variant-numeric:tabular-nums;}
  .rewards-points-label{font-size:12px;color:$t3;font-weight:500;}
  .rewards-progress-track{width:100%;height:6px;background:rgba(255,255,255,.06);border-radius:99px;overflow:hidden;margin-bottom:6px;}
  .rewards-progress-fill{height:100%;border-radius:99px;background:linear-gradient(90deg,$gold,lighten($gold,15%));animation:fillBar 1s cubic-bezier(.22,1,.36,1) .3s both;}
  .rewards-progress-labels{display:flex;justify-content:space-between;font-size:10px;color:$t3;margin-bottom:14px;}
  .cashback-row{display:flex;align-items:center;gap:0;padding:12px;background:rgba($s3,.6);border-radius:$r-md;border:1px solid $border;}
  .cashback-item{flex:1;text-align:center;}
  .cashback-val{font-size:16px;font-weight:700;color:$t1;font-variant-numeric:tabular-nums;}
  .cashback-label{font-size:10px;color:$t3;margin-top:3px;}
  .cashback-divider{width:1px;height:32px;background:$border;}
}

// ─── Security (NEW) ──────────────────────────────────────────
.security-widget {
  .security-badge{font-size:11px;font-weight:700;padding:3px 10px;border-radius:20px;&[data-level="Strong"]{background:rgba($emerald,.15);color:$em-light;border:1px solid rgba($emerald,.25);}&[data-level="Medium"]{background:rgba($amber,.15);color:lighten($amber,15%);border:1px solid rgba($amber,.25);}&[data-level="Weak"]{background:rgba($rose,.15);color:lighten($rose,12%);border:1px solid rgba($rose,.25);}}
  .security-list{display:flex;flex-direction:column;gap:8px;margin-bottom:14px;}
  .security-item{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:$r-md;background:rgba($s3,.5);border:1px solid $border;transition:all .2s;&:hover{border-color:$b-hover;}}
  .security-device-icon{font-size:20px;flex-shrink:0;}
  .security-info{flex:1;min-width:0;}
  .security-device{font-size:13px;font-weight:600;color:$t1;}
  .security-location{font-size:11px;color:$t3;margin-top:2px;}
  .security-status{font-size:11px;font-weight:700;color:$t3;&.current{color:$em-light;padding:2px 8px;border-radius:20px;background:rgba($emerald,.15);border:1px solid rgba($emerald,.25);}}
}

// ─── Conversion Widget ────────────────────────────────────────
.conversion-widget {
  .conversion-form .conversion-row{margin-bottom:10px;label{display:block;font-size:10px;font-weight:600;color:$t3;text-transform:uppercase;letter-spacing:.6px;margin-bottom:6px;}}
  .input-group{display:flex;gap:7px;input{flex:1;padding:9px 11px;border:1px solid $border;border-radius:$r-sm;font-size:13px;color:$t1;background:$s3;outline:none;font-weight:600;transition:border-color .2s,box-shadow .2s;&:focus{border-color:$b-hover;box-shadow:0 0 0 3px rgba($violet,.1);}}select{padding:9px 8px;border:1px solid $border;border-radius:$r-sm;font-size:12px;color:$t2;background:$s3;cursor:pointer;min-width:80px;outline:none;appearance:none;font-weight:600;transition:border-color .2s;&:focus{border-color:$b-hover;}}}
  .conversion-swap-row{display:flex;align-items:center;gap:10px;margin:8px 0;.conversion-line{flex:1;height:1px;background:$border;}.swap-icon{width:28px;height:28px;border-radius:50%;background:$s3;border:1px solid $border;display:flex;align-items:center;justify-content:center;font-size:14px;color:$v-light;cursor:pointer;transition:all .2s;&:hover{border-color:$b-hover;background:rgba($violet,.15);}}}
  .convert-btn{width:100% !important;height:40px !important;border-radius:$r-sm !important;font-weight:600 !important;font-size:12px !important;background:linear-gradient(135deg,$violet,$indigo) !important;box-shadow:none !important;margin-top:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;transition:opacity .2s,transform .2s !important;&:hover{opacity:.9;transform:translateY(-1px);}mat-icon{font-size:15px;width:15px;height:15px;margin-right:5px;}}
  .live-rates{margin-top:14px;padding-top:12px;border-top:1px solid $border;}
  .live-rates-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;.rates-label{font-size:11px;color:$t3;font-weight:600;text-transform:uppercase;letter-spacing:.7px;}}
  .live-indicator-sm{display:flex;align-items:center;gap:5px;font-size:10px;color:$em-light;font-weight:700;letter-spacing:.8px;.live-dot-sm{width:6px;height:6px;border-radius:50%;background:$em-light;animation:livePulse 1.6s ease-in-out infinite;}}
  .rate-row{display:flex;align-items:center;gap:8px;padding:7px 9px;border-radius:$r-sm;margin-bottom:3px;transition:background .2s;&:hover{background:$s3;}.rate-flag{font-size:17px;flex-shrink:0;}.rate-pair{font-size:12px;font-weight:600;color:$t1;flex:1;}.rate-sparkline{font-size:11px;color:$t3;letter-spacing:1px;}.rate-val{font-size:12px;font-weight:700;text-align:right;small{display:block;font-size:10px;font-weight:600;}&.up{color:$em-light;}&.down{color:lighten($rose,12%);}}}
}

// ─── Workflows Widget ─────────────────────────────────────────
.workflows-widget {
  .workflow-list{display:flex;flex-direction:column;gap:8px;margin-bottom:14px;}
  .workflow-item{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:$r-md;cursor:pointer;border:1px solid transparent;transition:all .22s ease;animation:workflowSlide .4s ease both;@for $i from 1 through 10{&:nth-child(#{$i}){animation-delay:#{.08s + $i * .06s};}}&:hover{background:rgba($violet,.08);border-color:$b-hover;transform:translateX(4px);.workflow-chevron{color:$v-light !important;}}.workflow-icon{font-size:18px;min-width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:$s3;border-radius:$r-sm;border:1px solid $border;}.workflow-info{flex:1;min-width:0;}.workflow-title{font-size:13px;font-weight:600;color:$t1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.workflow-status{font-size:11px;color:$t3;margin-top:2px;}.workflow-chevron{color:$t3 !important;font-size:16px !important;width:16px !important;height:16px !important;transition:color .2s;}}
  .budget-tracker{margin-bottom:14px;padding:13px;background:$s3;border-radius:$r-md;border:1px solid $border;}
  .budget-header{display:flex;justify-content:space-between;margin-bottom:11px;.budget-label{font-size:12px;font-weight:700;color:$t1;}.budget-period{font-size:11px;color:$t3;}}
  .budget-item{margin-bottom:10px;&:last-child{margin-bottom:0;}}
  .budget-row-top{display:flex;justify-content:space-between;margin-bottom:5px;font-size:12px;color:$t2;.over-budget{color:lighten($rose,12%);font-weight:600;}}
  .progress-track{width:100%;height:5px;background:rgba(255,255,255,.06);border-radius:99px;overflow:hidden;}
  .progress-fill{height:100%;border-radius:99px;animation:fillBar 1s cubic-bezier(.22,1,.36,1) both;&:nth-child(1){animation-delay:.15s;}&:nth-child(2){animation-delay:.30s;}&:nth-child(3){animation-delay:.45s;}&:nth-child(4){animation-delay:.60s;}&.violet{background:linear-gradient(90deg,$violet,$v-light);}&.cyan{background:linear-gradient(90deg,$cyan,$sky);}&.emerald{background:linear-gradient(90deg,$emerald,$em-light);}&.rose{background:linear-gradient(90deg,$rose,$pink);}}
}

// ─── Health Score ─────────────────────────────────────────────
.health-score-row{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:$s3;border-radius:$r-md;border:1px solid $border;margin-bottom:10px;.health-label{font-size:12px;font-weight:600;color:$t2;}.health-badge{font-size:11px;font-weight:700;padding:3px 10px;border-radius:20px;animation:badgePop .4s cubic-bezier(.34,1.56,.64,1) both;&.health-excellent{background:rgba($emerald,.18);color:$em-light;}&.health-good{background:rgba($cyan,.18);color:lighten($cyan,10%);}&.health-fair{background:rgba($amber,.18);color:lighten($amber,15%);}&.health-poor{background:rgba($rose,.18);color:lighten($rose,12%);}}}
.over-budget{color:lighten($rose,12%);font-weight:600;}

// ─── ANALYTICS GRID (NEW) ─────────────────────────────────────
.analytics-grid {
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:24px;
  margin-top:24px;
  position:relative;z-index:1;
  @media(max-width:1400px){grid-template-columns:repeat(2,1fr);}
  @media(max-width:900px){grid-template-columns:1fr;}
}

.analytics-card {
  @extend %card;
  .analytics-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px;gap:12px;}
  .analytics-title{font-size:15px;font-weight:700;color:$t1;margin:0 0 4px;font-family:'Syne','DM Sans',sans-serif;display:flex;align-items:center;gap:8px;}
  .analytics-subtitle{font-size:11px;color:$t3;margin:0;}
  .period-select{padding:7px 10px;border:1px solid $border;border-radius:$r-sm;font-size:12px;color:$t2;background:$s3;cursor:pointer;font-weight:500;outline:none;appearance:none;transition:border-color .2s;&:hover{border-color:$b-hover;}}
}

// ─── Monthly Report (NEW) ─────────────────────────────────────
.monthly-report-card {
  animation-delay:.05s;
  .monthly-bars{display:flex;align-items:flex-end;gap:12px;height:160px;padding:0 4px;}
  .month-col{display:flex;flex-direction:column;align-items:center;gap:8px;flex:1;}
  .month-bars-wrap{display:flex;align-items:flex-end;gap:3px;height:130px;width:100%;}
  .month-bar{
    flex:1;border-radius:$r-sm $r-sm 0 0;min-height:4px;
    position:relative;cursor:pointer;
    animation:barGrow .8s cubic-bezier(.22,1,.36,1) both;
    transition:filter .2s,transform .2s;
    &:hover{filter:brightness(1.2);transform:scaleY(1.02);transform-origin:bottom;.bar-tooltip{opacity:1;transform:translateY(-4px);}}
  }
  .income-bar{background:linear-gradient(180deg,$violet,rgba($violet,.4));&:nth-child(1){animation-delay:.1s;}&:nth-child(2){animation-delay:.15s;}&:nth-child(3){animation-delay:.2s;}&:nth-child(4){animation-delay:.25s;}&:nth-child(5){animation-delay:.3s;}&:nth-child(6){animation-delay:.35s;}}
  .expense-bar{background:linear-gradient(180deg,$cyan,rgba($cyan,.4));&:nth-child(1){animation-delay:.1s;}&:nth-child(2){animation-delay:.15s;}&:nth-child(3){animation-delay:.2s;}&:nth-child(4){animation-delay:.25s;}&:nth-child(5){animation-delay:.3s;}&:nth-child(6){animation-delay:.35s;}}
  .bar-tooltip{position:absolute;bottom:calc(100% + 4px);left:50%;transform:translateX(-50%) translateY(0);background:rgba($s3,.95);border:1px solid $border;color:$t1;font-size:10px;font-weight:600;padding:3px 6px;border-radius:4px;white-space:nowrap;pointer-events:none;opacity:0;transition:opacity .2s,transform .2s;}
  .month-label{font-size:10px;color:$t3;font-weight:600;text-align:center;}
  .monthly-legend{display:flex;align-items:center;gap:16px;margin-top:16px;padding-top:12px;border-top:1px solid $border;}
  .legend-item{display:flex;align-items:center;gap:6px;font-size:12px;color:$t2;font-weight:500;}
  .legend-dot{width:10px;height:10px;border-radius:3px;flex-shrink:0;}
  .income-dot{background:linear-gradient(135deg,$violet,$v-light);}
  .expense-dot{background:linear-gradient(135deg,$cyan,$sky);}
}

// ─── Spending Breakdown (NEW) ─────────────────────────────────
.spending-breakdown-card {
  animation-delay:.08s;
  .breakdown-body{display:flex;align-items:center;gap:20px;@media(max-width:600px){flex-direction:column;}}
  .donut-wrap{flex-shrink:0;}
  .donut-svg{width:140px;height:140px;}
  .donut-segment{animation:donutDraw .8s cubic-bezier(.22,1,.36,1) both;transition:stroke-width .2s;&:hover{stroke-width:22;}}
  .breakdown-legend{flex:1;display:flex;flex-direction:column;gap:8px;}
  .breakdown-item{display:flex;align-items:center;gap:8px;padding:5px 0;border-bottom:1px solid rgba(255,255,255,.04);&:last-child{border-bottom:none;}}
  .breakdown-dot{width:10px;height:10px;border-radius:50%;flex-shrink:0;}
  .breakdown-label{flex:1;font-size:12px;color:$t2;font-weight:500;}
  .breakdown-pct{font-size:12px;font-weight:700;color:$t1;}
}

// ─── Savings Goals (NEW) ──────────────────────────────────────
.savings-goals-card {
  animation-delay:.11s;
  .goals-list{display:flex;flex-direction:column;gap:14px;}
  .goal-item{padding:14px;background:rgba($s3,.5);border-radius:$r-md;border:1px solid $border;transition:border-color .2s,background .2s;&:hover{border-color:$b-hover;background:rgba($violet,.06);}}
  .goal-header-row{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px;}
  .goal-icon-name{display:flex;align-items:center;gap:10px;}
  .goal-icon{font-size:22px;}
  .goal-name{font-size:13px;font-weight:600;color:$t1;}
  .goal-deadline{font-size:11px;color:$t3;margin-top:2px;}
  .goal-amounts{display:flex;align-items:baseline;gap:0;white-space:nowrap;}
  .goal-saved{font-size:14px;font-weight:700;color:$t1;}
  .goal-target{font-size:11px;color:$t3;}
  .goal-track{width:100%;height:6px;background:rgba(255,255,255,.06);border-radius:99px;overflow:hidden;margin-bottom:6px;}
  .goal-fill{
    height:100%;border-radius:99px;animation:goalFill 1s cubic-bezier(.22,1,.36,1) .2s both;
    &[data-color="violet"]{background:linear-gradient(90deg,$violet,$v-light);}
    &[data-color="cyan"]{background:linear-gradient(90deg,$cyan,$sky);}
    &[data-color="emerald"]{background:linear-gradient(90deg,$emerald,$em-light);}
    &[data-color="amber"]{background:linear-gradient(90deg,$amber,lighten($amber,15%));}
    &[data-color="rose"]{background:linear-gradient(90deg,$rose,$pink);}
  }
  .goal-footer-row{display:flex;justify-content:space-between;}
  .goal-pct{font-size:11px;font-weight:600;color:$v-light;}
  .goal-remaining{font-size:11px;color:$t3;}
}

// ─── Cash Flow Forecast (NEW) ─────────────────────────────────
.cashflow-card {
  animation-delay:.14s;
  .cashflow-chart-wrap{height:160px;margin-bottom:16px;::ng-deep{ngx-charts-area-chart{display:block;width:100%;height:100%;}.ngx-charts{text{fill:$t3 !important;font-size:11px !important;}.gridline-path{stroke:$border !important;}.area{opacity:.2 !important;}.line-series path{stroke-width:2.5px !important;}}}}
  .cashflow-summary{display:flex;justify-content:space-between;padding-top:14px;border-top:1px solid $border;}
  .cashflow-point{text-align:center;}
  .cashflow-point-val{font-size:16px;font-weight:700;font-variant-numeric:tabular-nums;&.up{color:$em-light;}&.down{color:lighten($rose,12%);}}
  .cashflow-point-label{font-size:10px;color:$t3;margin-top:3px;}
}

// ─── Net Worth (NEW) ──────────────────────────────────────────
.networth-card {
  animation-delay:.17s;
  .networth-hero{margin-bottom:20px;}
  .networth-val{font-size:32px;font-weight:800;color:$t1;font-family:'Syne','DM Sans',sans-serif;letter-spacing:-1px;display:block;margin-bottom:6px;}
  .networth-change{font-size:12px;font-weight:600;&.up{color:$em-light;}&.down{color:lighten($rose,12%);}}
  .networth-breakdown{display:flex;flex-direction:column;gap:12px;}
  .nw-item{} .nw-row{display:flex;justify-content:space-between;margin-bottom:6px;}
  .nw-label{font-size:12px;color:$t2;font-weight:500;}
  .nw-val{font-size:13px;font-weight:700;&.assets{color:$em-light;}&.liabilities{color:lighten($rose,12%);}}
  .nw-track{width:100%;height:6px;background:rgba(255,255,255,.06);border-radius:99px;overflow:hidden;}
  .nw-fill{height:100%;border-radius:99px;animation:fillBar 1s cubic-bezier(.22,1,.36,1) .3s both;}
  .assets-fill{background:linear-gradient(90deg,$emerald,$em-light);}
  .liabilities-fill{background:linear-gradient(90deg,$rose,$pink);}
}

// ─── Tax Summary (NEW) ────────────────────────────────────────
.tax-card {
  animation-delay:.20s;
  .tax-year-badge{font-size:12px;font-weight:700;padding:4px 12px;border-radius:$r-sm;background:rgba($violet,.2);color:$v-light;border:1px solid rgba($violet,.3);}
  .tax-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:16px;}
  .tax-item{padding:12px;border-radius:$r-md;background:rgba($s3,.6);border:1px solid $border;text-align:center;transition:border-color .2s;&:hover{border-color:$b-hover;}&[data-color="violet"]{border-top:2px solid $violet;}&[data-color="cyan"]{border-top:2px solid $cyan;}&[data-color="emerald"]{border-top:2px solid $emerald;}&[data-color="amber"]{border-top:2px solid $amber;}}
  .tax-item-icon{font-size:20px;margin-bottom:6px;}
  .tax-item-val{font-size:16px;font-weight:700;color:$t1;font-variant-numeric:tabular-nums;}
  .tax-item-label{font-size:10px;color:$t3;margin-top:3px;font-weight:500;}
  .tax-notice{display:flex;align-items:center;gap:8px;padding:10px 14px;border-radius:$r-md;background:rgba($amber,.1);border:1px solid rgba($amber,.25);font-size:12px;color:$t2;.tax-notice-icon{font-size:16px;}strong{color:$t1;}}
}

// ─── Snackbar ─────────────────────────────────────────────────
::ng-deep{.snackbar-success .mdc-snackbar__surface{background:$emerald !important;}.snackbar-error .mdc-snackbar__surface{background:$rose !important;}.snackbar-info .mdc-snackbar__surface{background:$violet !important;}.mat-mdc-snack-bar-label{color:white !important;font-weight:600 !important;}}

// ─── Responsive ───────────────────────────────────────────────
@media(max-width:768px){.dashboard-container{padding:14px;}.stat-cards-row{gap:10px;}.charts-row{gap:12px;}.analytics-grid{gap:14px;}}
@media(max-width:480px){.stat-cards-row{grid-template-columns:1fr 1fr;}}